<!doctype html>
<html>
<head>
<title>HTML page</title>
<meta name="description" content="Our first page">
<meta name="keywords" content="html tutorial template">
</head>
<body>
<form id="macrosForm"  enctype="multipart/form-data">
  <label for="age">Age:</label><br>
  <input type="number" id="age" name="age"><br><br>

  <label for="gender">Gender:</label><br>
  <select id="gender" name="gender">
    <option value="male">Male</option>
    <option value="female">Female</option>
  </select><br><br>
  <label for="height">Height:</label><br>
  <input type="number" id="height" name="height" min="130" max="230"><br><br>

  <label for="weight">Weight:</label><br>
  <input type="number" id="weight" name="weight" min="10"><br><br>

  <label for="activity">Activity Level (1-7):</label><br>
  <input type="number" id="activity" name="activity" min="1" max="7"><br><br>

  <label for="goal">Goal:</label><br>
  <select id="goal" name="goal">
    <option value="maintain">Maintain weight</option>
    <option value="mildlose">Mild weight loss</option>
    <option value="weightlose">Weight loss</option>
    <option value="extremelose">Extreme weight loss</option>
    <option value="mildgain">Mild weight gain</option>
    <option value="weightgain">Weight gain</option>
    <option value="extremegain">Extreme weight gain</option>
  </select><br><br>

  <label for="diet">Diet type:</label><br>
  <select id="diet" name="diet">
    <option value="balanced">Balanced diet</option>
    <option value="lowfat">Low fat diet</option>
    <option value="lowcarbs">Low carbs diet</option>
    <option value="highprotein">High protein diet</option>
  </select><br><br>

  <label for="ingr">Ingredient (e.g 500g chocolate):</label><br>
  <textarea id="ingr" name="ingr" rows="4" cols="50"></textarea><br><br>

  <label for="api_key">Your API KEY:</label><br>
  <textarea id="api_key" name="api_key" rows="1" cols="50"></textarea><br><br>

  <input type="button" onclick="submitForm()" value="Submit">
</form>
<div id="result"></div>
<script>
    function submitForm() {
        const form = document.getElementById("macrosForm");
        const formData = new FormData(form);
        console.log(formData)
        console.log("siema")
        fetch('/macros', {
            method: 'POST',
            body: formData
        })
        .then(response => response.json())
        .then(data => {
          console.log(data)
            const resultDiv = document.getElementById("result");
            resultDiv.innerHTML = `
                <h2>Ingredient: ${data.ingr}</h2>
                <h3>Diet Type: ${data.diet}</h3>
                <h3>Goal: ${data.goal}</h3>
                <p>Daily Protein: ${data.ingredient_protein}%</p>
                <p>Daily Fat: ${data.ingredient_fat}%</p>
                <p>Daily Carbohydrates: ${data.ingredient_carbs}%</p>
            `;
        })
        .catch(error => {
            console.error('Error:', error);
        });
    }
</script>
</body>
</html>
